<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binomial Outcome • bayesCT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Binomial Outcome">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bayesCT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bayesCT.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/binomial.html">Binomial Outcome</a>
    </li>
    <li>
      <a href="../articles/normal.html">Normal Outcome</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/thevaachandereng/bayesCT">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Binomial Outcome</h1>
                        <h4 class="author">Thevaa Chandereng, Donald Musgrove, Tarek Haddad, Graeme Hickey, Timothy Hanson, Theodore Lystig</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/thevaachandereng/bayesCT/blob/master/vignettes/binomial.Rmd"><code>vignettes/binomial.Rmd</code></a></small>
      <div class="hidden name"><code>binomial.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The purpose of this vignette is to introduce how to simulate and analyze an adaptive bayesian clinical trial for binomial outcomes. The simulation section compromise of the design of the trial itself which provides a type I error rate and power at each interim look. We use the beta-binomial conjugate for the estimation of posterior probabilities. The historical data is used as an informative prior and we use <code>bayesDP</code> as an engine to incorporate the historical data. The default model uses a non-informative prior of <span class="math inline">\(Beta(a = 1, b = 1)\)</span> with/without the incorporation of historical data. Instead of using traditional R function, we use pipes to input our parameters.</p>
</div>
<div id="estimation-of-treatment-difference" class="section level1">
<h1 class="hasAnchor">
<a href="#estimation-of-treatment-difference" class="anchor"></a>Estimation of Treatment Difference</h1>
<p>Let <span class="math inline">\(y\)</span> and <span class="math inline">\(N\)</span> denote the number of events and sample size. Let <span class="math inline">\(a_0\)</span> and <span class="math inline">\(b_00\)</span> denote the rate parameters of a Beta distribution. Then, the posterior distribution of the event rates under vague (flat) priors is</p>
<p><span class="math display">\[ \tilde{\theta}\mid y,N \; \sim \;  \mathcal{B}eta\left(y+a_0,\,N-y+b_0 \right).\]</span> When historical data is present, then <span class="math inline">\(y_0\)</span> and <span class="math inline">\(N_0\)</span> denote the number of events and sample size of the historical data. The weight of the historical data included in the study design and analysis is denoted by <span class="math inline">\(\hat\alpha\)</span>. For more details on computation of <span class="math inline">\(\hat{\alpha}\)</span>, please refer to the vignette of binomial counts avaialable at <a href="https://cran.r-project.org/web/packages/bayesDP/vignettes/bdpbinomial-vignette.html" class="uri">https://cran.r-project.org/web/packages/bayesDP/vignettes/bdpbinomial-vignette.html</a>. The posterior distribution of the event rates with historical data incorporated under vague (flat) priors is</p>
<p><span class="math display">\[\tilde{\theta} \mid y,N, y_0, N_0 \; \sim \; \mathcal{B}eta\left(y+y_0\hat{\alpha}+a_0,\, N-y+\hat{\alpha}(N_0-y_0)+b_0 \right).\]</span></p>
<p>Since there is no closed-form solution for difference in beta distribution ( <span class="math inline">\(\mathcal{B}eta(\alpha_1, \beta_1)\)</span> - <span class="math inline">\(\mathcal{B}eta(\alpha_2, \beta_2)\)</span>), we use Monte Carlo estimation of the posteriors of treatment and control group to compute the effect of treatment difference.</p>
<p>The estimation of proportion of treatment difference <span class="math inline">\(\tilde{\theta_T} - \tilde{\theta_C}\)</span>, where <span class="math inline">\(\theta_T\)</span> is the posterior of the event rates in the treatment group and <span class="math inline">\(\theta_C\)</span> is the posterior of the event rates in the control group.</p>
</div>
<div id="wrapper-function-for-design-and-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#wrapper-function-for-design-and-analysis" class="anchor"></a>Wrapper Function for Design and Analysis</h1>
<p>Unlike traditional R function, the R package depends on pipe inputs with different wrapper functions. All the wrapper functions are illustrated below with details on the arguments for the simulation and analysis.</p>
<p><strong>binomial_outcome</strong>: The binomial outcome is a wrapper function for the simulation. The binomial outcome has two input <strong>p_treatment</strong> and <strong>p_control</strong>.</p>
<ul>
<li><p><strong>p_treatment</strong> is a required input where the proportion of events for a single-arm or double-arm trials are specified for the treatment arm, where <span class="math inline">\(0 &lt; p_{treatment} &lt; 1\)</span>.</p></li>
<li><p><strong>p_control</strong> is set to NULL as default for single-arm trials. However, for two-arm trials <strong>p_control</strong> input specifies the proportion of events for the control arm, where <span class="math inline">\(0 &lt; p_{control} &lt; 1\)</span>.</p></li>
</ul>
<p><strong>study_details</strong>: The study details is a wrapper function for the simulation. The <strong>study_details</strong> function takes four input (<strong>total_sample_size</strong>, <strong>study_period</strong>, <strong>interim_look</strong> and <strong>prop_loss_to_followup</strong>).</p>
<ul>
<li><p><strong>total_sample_size</strong> input determines the number of sample size required to run the simulation.</p></li>
<li><p><strong>study_period</strong> input determines the length of the study. Since interim look at x is done when the x^{th} patient is enrolled, the length of study is important for imputation purpose.</p></li>
<li><p><strong>interim_look</strong> function allows a vector of numeric value, where the trials are stopped to check for early success or futility. For more details on the early stopping for futility or success, please look at the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#early-stopping-for-futility-or-success" class="uri">https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#early-stopping-for-futility-or-success</a>. The interim_look values need to be smaller than the sample_size value.</p></li>
<li><p>Loss to follow up is not peculiar in a clinical trial setting, the <strong>prop_loss_to_followup</strong> input allows to set the proportion of loss to follow up. The default value is set to 0.10. The <strong>prop_loss_to_followup</strong> needs to be between 0 and 1.</p></li>
</ul>
<p><strong>enrollment_rate</strong>: The enrollment rate is a wrapper function for the simulation. The <strong>enrollment_rate</strong> function takes two input (<strong>lambda</strong>, <strong>time</strong>) unlike the <strong>enrollment</strong> function.</p>
<ul>
<li><p><strong>lambda</strong> input is similar to <strong>param</strong> input in the <strong>enrollment</strong> function where it takes different lambda values for different poison rates (the default is set to 0.3, i.e. 0.3 patients per recruited per day).</p></li>
<li><p><strong>time</strong> input works similarly to the <strong>time</strong> input in the <strong>enrollment</strong> function where <strong>time</strong> input determines the cutoff rate for different poison rate (default set to NULL). For more details, please look at the recruitment section on the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#recruitment" class="uri">https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#recruitment</a>.</p></li>
</ul>
<p><strong>hypothesis</strong>: The hypothesis is a wrapper function for both simulation and analysis. The <strong>hypothesis</strong> wrapper takes five different inputs (<strong>delta</strong>, <strong>prob_accept_ha</strong>, <strong>futility_prob</strong>, <strong>expected_success_prob</strong> and <strong>alternative</strong>).</p>
<ul>
<li><p>The <strong>delta</strong> input determines the threshold difference for treatment and control group or the threshold for single-arm trial (the default is set to 0). For non-inferiority trial, the difference needs to be &lt; 0.</p></li>
<li><p>The input <strong>prob_accept_ha</strong> controls the probability of accepting the alternative hypothesis. The default is set to 0.95.</p></li>
<li><p><strong>futility_prob</strong> input controls the futility rate <span class="math inline">\(\omega\)</span> in the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#futility" class="uri">https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#futility</a>. The default is set to 0.10. To prevent the trial for stopping for futility, set the <strong>futility_prob</strong> to 0.</p></li>
<li><p><strong>expected_success_prob</strong> input controls the early success rate <span class="math inline">\(\Delta\)</span> in the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html">bayesCT main vignette</a>. The default is set to 0.90. To prevent the trial for stopping for early success, set the <strong>expected_success_prob</strong> to 1. For more details on the criteria of early stopping for success or futility, please see the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#success" class="uri">https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#success</a>. The -</p></li>
<li><p><strong>alternative</strong> input takes a character string specifying the alternative hypothesis, must be one of “greater” <span class="math inline">\(p_{treatment} &gt; p_{control}\)</span> (default), “less” <span class="math inline">\(p_{treatment} &lt; p_{control}\)</span> or “two-sided” <span class="math inline">\(p_{treatment} \neq p_{control}\)</span>.</p></li>
</ul>
<p><strong>randomize</strong>: The randomize is a wrapper function for the simulation. The <strong>randomize</strong> function takes two input (<strong>block_size</strong> and <strong>randomization_ratio</strong>).</p>
<ul>
<li><p><strong>block_size</strong> input controls the size of each block to randomize.</p></li>
<li><p><strong>randomization_ratio</strong> is a vector of length 2 which determine the ratio for control to treatment. For more details, please look at the randomization section on the <a href="https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#randomization-scheme" class="uri">https://thevaachandereng.github.io/bayesCT/articles/bayesCT.html#randomization-scheme</a>.</p></li>
</ul>
<p><strong>impute</strong>: The impute is a wrapper function for simulation and analysis. The <strong>impute</strong> function takes two input (<strong>no_of_impute</strong>, <strong>number_mcmc</strong>).</p>
<ul>
<li><p><strong>no_of_impute</strong> determines the number of imputation done for loss to follow-up to stop for early success and number of imputation done for loss to follow-up and patients not enrolled (only in simulation scenario) for loss to follow-up for futility. The default is set to 10 to generate the vignette quickly. However, the general rule of thumb for implementation of adaptive trials would be to set <strong>no_of_impute</strong> to 10,000.</p></li>
<li><p>A Monte Carlo estimation approach is used to estimate the posterior probability, requiring several samples from the posterior distributions. The <strong>number_mcmc</strong> controls the number of Monte Carlo estimation with default set to 10000.</p></li>
</ul>
<p><strong>beta_prior</strong>: The beta prior is a wrapper function for the non-informative prior for simulation and analysis. The <strong>beta_prior</strong> takes two input (<strong>a_0</strong> and <strong>b_0</strong>).</p>
<ul>
<li><p><strong>a_0</strong> regulates the shape value <span class="math inline">\(\alpha\)</span> in the beta distribution. The default value of <strong>a_0</strong> is 1. To completely avoid using non-informative prior, users can set <strong>a_0</strong> to 0.</p></li>
<li><p><strong>b_0</strong> regulates the shape value <span class="math inline">\(\beta\)</span> in the beta distribution. The default value of <strong>b_0</strong> is 1. To completely avoid using non-informative prior, users can set <strong>b_0</strong> to 0.</p></li>
</ul>
<p><strong>historical_binomial</strong>: The historical binomial wrapper function allows incorporation of historical data using discount function in the analysis and simulation. This wrapper is only used when historical data is incorporated in the analysis or simulation. For more details on the method and computation, please look at the <a href="https://cran.r-project.org/web/packages/bayesDP/vignettes/bdpbinomial-vignette.html">bayesDP binomial vignette</a>. Historical binomial takes 9 inputs.</p>
<ul>
<li><p><strong>y0_treatment</strong>: The number of events in the historical treatment group.</p></li>
<li><p><strong>N0_treatment</strong>: The sample size for the historical treatment group.</p></li>
<li><p><strong>y0_control</strong>: The number of events in the historical control group.</p></li>
<li><p><strong>N0_control</strong>: The sample size for the historical control group.</p></li>
<li><p><strong>discount_function</strong>: Specify the discount function to use. Currently supports weibull, scaledweibull, and identity. The discount function scaledweibull scales the output of the Weibull CDF to have a max value of 1. The identity discount function uses the posterior probability directly as the discount weight. Default value is “identity”.</p></li>
<li><p><strong>alpha_max</strong>: Maximum weight the discount function can apply. Default is 1. For a two-arm trial, users may specify a vector of two values where the first value is used to weight the historical treatment group and the second value is used to weight the historical control group.</p></li>
<li><p><strong>fix_alpha</strong>: Fix alpha at alpha_max? Default value is FALSE.</p></li>
<li><p><strong>weibull_scale</strong>: Scale parameter of the Weibull discount function used to compute alpha, the weight parameter of the historical data. Default value is 0.135. For a two-arm trial, users may specify a vector of two values where the first value is used to estimate the weight of the historical treatment group and the second value is used to estimate the weight of the historical control group. Not used when discount_function = “identity”.</p></li>
<li><p><strong>weibull_shape</strong>: Shape parameter of the Weibull discount function used to compute alpha, the weight parameter of the historical data. Default value is 3. For a two-arm trial, users may specify a vector of two values where the first value is used to estimate the weight of the historical treatment group and the second value is used to estimate the weight of the historical control group. Not used when discount_function = “identity”.</p></li>
</ul>
<p><strong>data_binomial</strong>: The data binomial is a wrapper function for inputting data for analysis of bayesian trial with binomial outcome. The <strong>data_binomial</strong> takes three input (<strong>treatment</strong>, <strong>outcome</strong> and <strong>complete</strong>).</p>
<ul>
<li><p><strong>treatment</strong>: treatment assignment for patients in the trial, 1 for treatment group and 0 for control group.</p></li>
<li><p><strong>outcome</strong>: binomial outcome of the trial, 1 for response (success or failure), 0 for no response. The length of the vector is the same size as the treatment variable.</p></li>
<li><p><strong>complete</strong>: similar length as treatment and outcome variable, 1 for complete outcome, 0 for loss to follow up. If complete is 0, the outcome of the patient is ignored. If complete is not provided, the dataset is assumed to be complete.</p></li>
</ul>
<p><strong>analysis</strong>: The analysis is a wrapper function for analyzing of bayesian trial with binomial outcome. The <strong>analysis</strong> takes the pipe function input and analyze the trial.</p>
<ul>
<li><p><strong>input</strong>: The input of the analysis is a list of input to run the adaptive trials.</p></li>
<li><p><strong>type</strong>: The type input determines what trial to be analyzed. In the binomial vignette, the type needs to be set to “binomial”.</p></li>
</ul>
<p><strong>simulate</strong>: The simulate is a wrapper function for simulation of adaptive trials. The <strong>simulate</strong> takes the pipe function input and runs the trial.</p>
<ul>
<li><p><strong>input</strong> - The input of the analysis is a list of input to run the adaptive trials.</p></li>
<li><p><strong>no_of_sim</strong>- The no_of_sim determines the number of trials to be run. The default is set to 10,000.</p></li>
</ul>
</div>
<div id="design-of-adaptive-trials" class="section level1">
<h1 class="hasAnchor">
<a href="#design-of-adaptive-trials" class="anchor"></a>Design of Adaptive Trials</h1>
<p>We will discuss the design of adaptive trial using bayesCT for binomial outcome in the following section. We illustrate an example for one-arm trial and two-arm trial using the wrapper functions described above.</p>
<div id="one-arm-trial" class="section level2">
<h2 class="hasAnchor">
<a href="#one-arm-trial" class="anchor"></a>One-arm Trial</h2>
<p>In the example below, we will illustrate how to compute power, type 1 error and other clinical trial details for an objective performace criterion (OPC) trial with proportion of events and the hypothesis described as follows, <span class="math display">\[H_0: \theta_{treatment} \geq 0.08 \qquad H_A:\theta_{treatment} &lt; 0.08.\]</span></p>
<p><strong>study_details</strong> and <strong>binomial_outcome</strong> are the most important wrapper function for the design of adaptive trials using bayesCT (since there is no default set).</p>
<p>The binomial events are simulated using a rate of 0.08. The total sample size is 900 with a study length of 50 days. A 10% loss to follow up are induced to the simulated data at random. Based on this input, the adaptive trials are simulated 10 times to obtain the following output. For the purpose of reproducing the vignette quickly, we reduce the number of simulation to 10. The general rule of thumb for number of simulation used in clinical trials is 10,000. <strong>Note: The inputs used are picked for illustration purpose.</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">value &lt;-</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="st">   </span><span class="kw">binomial_outcome</span>(<span class="dt">p_treatment =</span> <span class="fl">0.08</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="st">   </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">900</span>, <span class="dt">study_period =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">                 <span class="dt">interim_look =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">                 <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.10</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># simulating 10 times</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10"></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co"># structure of the simulation output</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;  $ power                       :'data.frame':    1 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;   ..$ interim_looks: num 900</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;   ..$ power        : num 0</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  $ type1_error                 : num 0.1</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0813 0.0863 0.0801 0.0875 0.0838 ...</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.542 0.727 0.491 0.768 0.64 ...</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 900 900 900 900 900 900 900 900 900 900</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>To allow for early stopping for success or futility, we add interim look to the design where the trial is stopped at the enrollment of 600th, 700th and 800th patient. Upon adding this interim look requirement, the trial is simulated 10 times to obtain the output.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># adding interim look</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">900</span>, <span class="dt">study_period =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                <span class="dt">interim_look =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">600</span>, <span class="dv">700</span>, <span class="dv">800</span>),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">                <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.10</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co"># simulating 10 times</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co"># structure of the simulation output</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;   ..$ power        : num [1:4] 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  $ type1_error                 : num 0.1</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0817 0.0767 0.0799 0.0879 0.0936 ...</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.541 0.367 0.477 0.752 0.911 ...</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 600 600 600 700 900 600 800 800 600 600</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 1 1 1 0 1 1 1 1 1</span></a></code></pre></div>
<p>The enrollment of patients in the trial is assumed to be a Poisson process. The default enrollment rate is assumed to enroll 0.3 patients per day. However, in this simulation we introduce a step-wise Poisson process with lambda as follows</p>
<p><span class="math display">\[  \lambda = \left\{
\begin{array}{ll}
      0.3 &amp; t \in [0, 25) \\
      1 &amp; t \in [25, \infty) \\
\end{array} 
\right. \]</span> The following enrollment rate is added to the simulation and the trial is simulated for 10 times.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">enrollment_rate</span>(<span class="dt">lambda =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.3</span>, <span class="dv">1</span>), <span class="dt">time =</span> <span class="dv">25</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;   ..$ power        : num [1:4] 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0514 0.0748 0.0886 0.0904 0.094 ...</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.0034 0.3021 0.7868 0.7969 0.8724 ...</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 600 700 800 600 600 600 600 600 600 600</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 1 1 1 1 1 1 1 1 1</span></a></code></pre></div>
<p>The hypothesis is an important wrapper function which controls the probability of futility, probability of accepting alternative hypothesis, probablity of early success, alternative hypothesis and margin of treatment difference. Since, in a OPC trial, the proportion of events in the treatment group are simulated using the input provided, the delta controls the maximum threshold allowed for trial to succeed/fail. The default delta used is 0, we set the delta to -0.03 (i.e <span class="math inline">\(\hat\theta_{treatment} - 0.08 &gt; -0.03\)</span>). The futility probability is set at 0.05 and the expected success probability for early stopping is set at 0.90 with the final probability of accepting the alternative set at 0.95. The alternative is set to “less” due to the hypothesis function above.<br>
The trial is simulated again 10 times to obtain the output.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">   </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="fl">-0.03</span>, <span class="dt">futility_prob =</span> <span class="fl">0.05</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.95</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">             <span class="dt">expected_success_prob =</span> <span class="fl">0.90</span>, <span class="dt">alternative =</span> <span class="st">"less"</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;   ..$ power        : num [1:4] 0.6 0.7 0.9 0.9</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0863 0.0757 0.0801 0.0706 0.0881 ...</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.983 0.997 0.992 0.999 0.967 ...</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 800 600 600 600 700 800 600 900 600 600</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 1 1 1 1 1 1 1 0 1 1</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>The simulation is done for 25 times to impute the loss to follow up data and the posterior are sampled for 1000 (number_mcmc) to obtain an estimate for the posterior value. The trial is simulated for 10 times to obtain the output.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">25</span>, <span class="dt">number_mcmc =</span> <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   ..$ power        : num [1:4] 0.3 0.4 0.7 0.9</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.091 0.0938 0.0886 0.0809 0.0776 ...</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.965 0.94 0.971 0.997 0.997 0.982 0.993 0.996 1 0.985</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 900 900 900 800 800 600 600 800 600 700</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 1 1 1 1 1 1 1</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>The default non-informative beta prior used in the simulation is <span class="math inline">\(\mathcal{B}eta(1, 1)\)</span>. In our simulation of the OPC trial, we decided to use <span class="math inline">\(\mathcal{B}eta(5,5)\)</span> to increase the weight of the non-informative prior in the simulation. This non-informative beta prior is implemented using beta_prior wrapper function. The trial is simulated for 10 times to obtain the output.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">5</span>, <span class="dt">b0 =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;   ..$ power        : num [1:4] 0.4 0.7 0.8 0.9</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0719 0.0976 0.0794 0.0922 0.0829 ...</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 1 0.881 0.999 0.958 0.985 1 0.992 0.968 0.987 0.993</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 600 900 700 900 700 600 800 600 600 700</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 1 0 1 0 1 1 1 1 1 1</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>Historical data is not required to compute the simulation. However, if historical data is avaialble, historical data can be augmented in the analysis using the discount prior approach as implemented in <strong>bayesDP</strong>. In our OPC trial, we augmented historical data for illustration purpose. The historical data is incorporated for the treatment group using the discount func- tion, there were 5 historical events from a historical sample size of 55 using the identity discount function. For more details on the method and computation, please look at the <a href="https://cran.r-project.org/web/packages/bayesDP/vignettes/bdpbinomial-vignette.html">bayesDP binomial vignette</a>. Historical binomial takes 9 inputs. The trial is simulated for 10 times to obtain the output.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">historical_binomial</span>(<span class="dt">y0_treatment =</span> <span class="dv">5</span>, <span class="dt">N0_treatment =</span> <span class="dv">55</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">                      <span class="dt">discount_function =</span> <span class="st">"identity"</span>,</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">                      <span class="dt">y0_control =</span> <span class="ot">NULL</span>, <span class="dt">N0_control =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">                      <span class="dt">alpha_max =</span> <span class="dv">1</span>, <span class="dt">fix_alpha =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">                       <span class="dt">weibull_scale =</span> <span class="fl">0.135</span>, <span class="dt">weibull_shape =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10"></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;   ..$ power        : num [1:4] 0.5 0.6 0.6 0.7</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.087 0.0852 0.0773 0.0917 0.0747 ...</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.966 0.979 0.999 0.966 0.996 0.984 0.897 0.997 0.873 0.68</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 700 600 600 900 600 600 600 600 900 900</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 1 1 1 0 1 1 1 1 0 0</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>Instead of inputting parameters step by step, the trial parameters can be filled at once as illustrtaed below. The pipe function connects all input together and finally the simulation is done for 10 times to obtain the results.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">value &lt;-</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw">binomial_outcome</span>(<span class="dt">p_treatment =</span> <span class="fl">0.08</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">enrollment_rate</span>(<span class="dt">lambda =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.3</span>, <span class="dv">1</span>), <span class="dt">time =</span> <span class="dv">25</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">900</span>, <span class="dt">study_period =</span> <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">                <span class="dt">interim_look =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">600</span>, <span class="dv">700</span>, <span class="dv">800</span>),</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">                <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="st">  </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="fl">-0.03</span>, <span class="dt">futility_prob =</span> <span class="fl">0.05</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.95</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">             <span class="dt">expected_success_prob =</span> <span class="fl">0.90</span>, <span class="dt">alternative =</span> <span class="st">"less"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">25</span>, <span class="dt">number_mcmc =</span> <span class="dv">1000</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">5</span>, <span class="dt">b0 =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="st">  </span><span class="kw">historical_binomial</span>(<span class="dt">y0_treatment =</span> <span class="dv">5</span>, <span class="dt">N0_treatment =</span> <span class="dv">55</span>,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">                      <span class="dt">discount_function =</span> <span class="st">"identity"</span>,</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">                      <span class="dt">y0_control =</span> <span class="ot">NULL</span>, <span class="dt">N0_control =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">                      <span class="dt">alpha_max =</span> <span class="dv">1</span>, <span class="dt">fix_alpha =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">                       <span class="dt">weibull_scale =</span> <span class="fl">0.135</span>, <span class="dt">weibull_shape =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb8-18" data-line-number="18"></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(value)</a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt;  $ power                       :'data.frame':    4 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt;   ..$ interim_looks: num [1:4] 600 700 800 900</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt;   ..$ power        : num [1:4] 0.5 0.7 0.8 0.9</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0999 0.0869 0.0873 0.0781 0.078 ...</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.845 0.991 0.968 0.997 0.996 0.994 0.991 1 0.983 0.994</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 800 800 700 700 600 600 600 600 900 600</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 1 1 1 1 1 1 1 0 1</span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
</div>
<div id="two-arm-trial" class="section level2">
<h2 class="hasAnchor">
<a href="#two-arm-trial" class="anchor"></a>Two-arm trial</h2>
<p>In this section, we will illustrate how to perform the design of a two-arm trial without incorporating historical data. The example will compute the type 1, power and other outputs for a superiority trial with hypothesis as indicated below, <span class="math display">\[H_0: \theta_{treatment} - \theta_{control} \leq 0 \qquad H_A: \theta_{treatment} - \theta_{control} &gt; 0.\]</span></p>
<p>The binomial events are simulated using a rate of 0.15 for the treatment group and 0.12 for the control group. The total sample size is 400 with a study length of 30 days. A 15% loss to follow up are induced to the simulated data at random. Based on this input, the adaptive trials are simulated 10 times to obtain the following output. We simulated the trials for 10 times and the input and ouput are included below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">value &lt;-</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">   </span><span class="kw">binomial_outcome</span>(<span class="dt">p_treatment =</span> <span class="fl">0.15</span>, <span class="dt">p_control =</span> <span class="fl">0.12</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">   </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">400</span>, <span class="dt">study_period =</span> <span class="dv">30</span>,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">                 <span class="dt">interim_look =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">                 <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.15</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co"># simulating 10 times</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co"># structure of the simulation output</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;  $ power                       :'data.frame':    1 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt;   ..$ interim_looks: num 400</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt;   ..$ power        : num 0.1</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt;  $ type1_error                 : num 0.2</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt;  $ est_final                   : num [1:10] -0.0172 -0.0103 0.0232 0.0311 0.053 ...</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.321 0.402 0.744 0.789 0.923 ...</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 400 400 400 400 400 400 400 400 400 400</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a></code></pre></div>
<p>To allow for early stopping for success or futility, we add interim look to the design where the trial is stopped at the enrollment of 350th patient. Upon adding this interim look requirement, the trial is simulated 10 times to obtain the output.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># adding interim look</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">400</span>, <span class="dt">study_period =</span> <span class="dv">30</span>,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">                <span class="dt">interim_look =</span> <span class="dv">350</span>,</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">                <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.15</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co"># simulating 10 times</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co"># structure of the simulation output</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0.1</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0287 -0.03469 -0.00931 0.06219 0.05751 ...</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.755 0.213 0.409 0.943 0.944 ...</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 350 350 350 400 400 350 400 350 400 400</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 1 1 0 0 1 0 1 0 0</span></a></code></pre></div>
<p>The hypothesis is an important wrapper function which controls the probability of futility, probability of accepting alternative hypothesis, probablity of early success, alternative hypothesis and margin of treatment difference. The margin of treatment difference <span class="math inline">\(\delta\)</span> is set to 0 since we are designing a superiority trial. The futility probability is set at 0.10 and the expected success probability for early stopping is set at 1 (it does not stop early for expected success) with the final probability of accepting the alternative set at 0.975. The alternative is set to “greater” due to the alternative hypothesis function above.<br>
The trial is simulated again 10 times to obtain the output.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">   </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="dv">0</span>, <span class="dt">futility_prob =</span> <span class="fl">0.10</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.975</span>,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">             <span class="dt">expected_success_prob =</span> <span class="dv">1</span>, <span class="dt">alternative =</span> <span class="st">"greater"</span>)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt;  $ est_final                   : num [1:10] -0.0111 0.0266 0.0603 -0.061 0.0619 ...</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.3837 0.7615 0.9462 0.0633 0.9414 ...</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 350 350 400 350 400 400 350 400 350 350</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 1 0 1 0 0 1 0 1 1</span></a></code></pre></div>
<p>The enrollment of patients in the trial is assumed to be a Poisson process. The enrollment rate in this trial is assumed to be 0.5 patients per day. The randomization ratio is 1:1.25 with a block size of 9. The trial is simulated 10 times using the enrollment rate and randomization scheme.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">enrollment_rate</span>(<span class="dt">lambda =</span> <span class="fl">0.5</span>, <span class="dt">time =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="kw">randomize</span>(<span class="dt">block_size =</span> <span class="dv">9</span>, <span class="dt">randomization_ratio =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; $block</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; $rand_ratio</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [1] 4 5</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb12-12" data-line-number="12"></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0.3</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.00617 0.07274 0.06119 -0.01654 -0.02135 ...</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.567 0.976 0.94 0.323 0.31 ...</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 400 400 400 350 350 400 350 400 400 350</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt;  $ stop_futility               : num [1:10] 0 0 0 1 1 0 1 0 0 1</span></a></code></pre></div>
<p>The simulation is done for 20 times to impute the loss to follow up data and the posterior are sampled for 5000 (number_mcmc) to obtain an estimate for the posterior value. The trial is simulated for 10 times to obtain the output.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">20</span>, <span class="dt">number_mcmc =</span> <span class="dv">5000</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0.1</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.03495 0.02388 0.02596 0.00563 -0.00393 ...</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.779 0.729 0.77 0.545 0.456 ...</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 350 350 350 350 350 350 350 350 350 400</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 1 1 1 1 1 1 1 1 0</span></a></code></pre></div>
<p>The default non-informative beta prior used in the simulation is <span class="math inline">\(\mathcal{B}eta(1, 1)\)</span>. In our simulation of the trial, we decided to not use non-informative prior in the design (<span class="math inline">\(\mathcal{B}eta(0,0)\)</span>). This is implemented using beta_prior wrapper function. The trial is simulated for 10 times to obtain the output.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">value &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">0</span>, <span class="dt">b0 =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">output &lt;-<span class="st"> </span>value <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(output)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0.3</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt;  $ type1_error                 : num 0.1</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;  $ est_final                   : num [1:10] 0.0507 0.0782 0.0898 -0.0143 -0.0164 ...</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.884 0.984 0.997 0.363 0.323 ...</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 350 400 400 350 350 350 350 350 400 350</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 0 0 1 1 1 1 1 0 1</span></a></code></pre></div>
<p>Instead of inputting parameters step by step, the trial parameters can be filled at once as illustrtaed below. The pipe function connects all input together and finally the simulation is done for 10 times to obtain the results.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">value &lt;-</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">   </span><span class="kw">binomial_outcome</span>(<span class="dt">p_treatment =</span> <span class="fl">0.15</span>, <span class="dt">p_control =</span> <span class="fl">0.12</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">   </span><span class="kw">study_details</span>(<span class="dt">total_sample_size =</span> <span class="dv">400</span>, <span class="dt">study_period =</span> <span class="dv">30</span>,</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                 <span class="dt">interim_look =</span> <span class="dv">350</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">                 <span class="dt">prop_loss_to_followup =</span> <span class="fl">0.15</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="st">  </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="dv">0</span>, <span class="dt">futility_prob =</span> <span class="fl">0.10</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.975</span>,</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">             <span class="dt">expected_success_prob =</span> <span class="dv">1</span>, <span class="dt">alternative =</span> <span class="st">"greater"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="st">  </span><span class="kw">randomize</span>(<span class="dt">block_size =</span> <span class="dv">9</span>, <span class="dt">randomization_ratio =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="dv">5</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">20</span>, <span class="dt">number_mcmc =</span> <span class="dv">5000</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">0</span>, <span class="dt">b0 =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/simulate">simulate</a></span>(<span class="dt">no_of_sim =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb15-13" data-line-number="13"></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(value)</a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; List of 7</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt;  $ power                       :'data.frame':    2 obs. of  2 variables:</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt;   ..$ interim_looks: num [1:2] 350 400</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt;   ..$ power        : num [1:2] 0 0</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt;  $ type1_error                 : num 0</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt;  $ est_final                   : num [1:10] -0.02022 0.0568 0.01085 0.03989 -0.00433 ...</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt;  $ post_prob_accept_alternative: num [1:10] 0.304 0.922 0.611 0.867 0.459 ...</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt;  $ N_enrolled                  : num [1:10] 350 400 350 350 350 400 350 350 400 350</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt;  $ stop_expect_success         : num [1:10] 0 0 0 0 0 0 0 0 0 0</span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt;  $ stop_futility               : num [1:10] 1 0 1 1 1 0 1 1 0 1</span></a></code></pre></div>
</div>
</div>
<div id="analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#analysis" class="anchor"></a>Analysis</h1>
<p>In this section, we will demonstrate how to run adaptive bayesian trial using <strong>bayesCT</strong>. A sample dataset is provided in the package. The dataset <strong>binomialdata</strong> contains the results of 300 patients with binomial outcome, treatment group and loss to follow up.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(binomialdata)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(binomialdata)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt;         id treatment outcome complete</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; 1 Patient1         1       0        0</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; 2 Patient2         0       0        1</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; 3 Patient3         1       0        1</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; 4 Patient4         0       0        1</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; 5 Patient5         0       1        1</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; 6 Patient6         0       0        1</span></a></code></pre></div>
<p>The minimum input needed to run an adaptive bayesian trial is the data itself. The <strong>data_binomial</strong> input allows the input of the data. The treatment group (0 for control, 1 for treatment) and outcome input are essential for the analysis. However, if the complete input is not provided, the function assumes the outcome data is complete. The data is analyzed using the input below.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">input &lt;-</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw">data_binomial</span>(<span class="dt">treatment =</span> binomialdata<span class="op">$</span>treatment,</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">                <span class="dt">outcome   =</span> binomialdata<span class="op">$</span>outcome,</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">                <span class="dt">complete  =</span> binomialdata<span class="op">$</span>complete)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"></a>
<a class="sourceLine" id="cb17-6" data-line-number="6">out &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt;  $ margin                       : num 0</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.995</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="co">#&gt;  $ est_final                    : num 0.123</span></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="co">#&gt;  $ stop_expected_success        : num 1</span></a></code></pre></div>
<p>The trials is analyzed for the following hypothesis <span class="math display">\[H_0:\theta_{treatment} - \theta_{control} &lt;= 0.02 \quad H_A: \theta_{treatment} - \theta_{control} &gt; 0.02\]</span> The delta and alternative used to analyze the trial is 0.02 and “greater” respectively. The probability if accepting alternative is 0.95, the probability of stopping for futility is 0.05 and the probability of stopping for success is 0.90. The trial is reanalyzed with this input.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">input &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="fl">0.02</span>, <span class="dt">futility_prob =</span> <span class="fl">0.05</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.95</span>,                                       <span class="dt">expected_success_prob =</span> <span class="fl">0.90</span>, <span class="dt">alternative =</span> <span class="st">"greater"</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"></a>
<a class="sourceLine" id="cb18-4" data-line-number="4">out &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt;  $ margin                       : num 0.02</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.983</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt;  $ est_final                    : num 0.123</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#&gt;  $ stop_expected_success        : num 1</span></a></code></pre></div>
<p>The simulation is done for 50 times to impute the loss to follow up data and the posterior are sampled for 1000 (number_mcmc) to obtain an estimate for the posterior value. The trial is reanalyzed again.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">input &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">50</span>, <span class="dt">number_mcmc =</span> <span class="dv">10000</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">out &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;  $ margin                       : num 0.02</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.982</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">#&gt;  $ est_final                    : num 0.124</span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">#&gt;  $ stop_expected_success        : num 1</span></a></code></pre></div>
<p>In our analysis, we decided to use <span class="math inline">\(\mathcal{B}eta(3,3)\)</span> as a non-informative prior. This non-informative beta prior is implemented using beta_prior wrapper function. The trial is analyzed again with this additional input.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">input &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">3</span>, <span class="dt">b0 =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4"></a>
<a class="sourceLine" id="cb20-5" data-line-number="5">out &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb20-7" data-line-number="7"></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt;  $ margin                       : num 0.02</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.979</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="co">#&gt;  $ est_final                    : num 0.12</span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">#&gt;  $ stop_expected_success        : num 1</span></a></code></pre></div>
<p>Finally, we incorporated historical data using the wrapper function <strong>historical_binomial</strong>. In our analysis, we only incorporate historical data for the treatment group. The historical data is incorporated for the treatment group using the discount function approach and weibull discount fucntion with scale of 0.135 and shape parameter of 3, there were 12 historical events from a historical sample size of 100. For more details on the method and computation of historical data, please look at the <a href="https://cran.r-project.org/web/packages/bayesDP/vignettes/bdpbinomial-vignette.html">bayesDP binomial vignette</a>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">input &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw">historical_binomial</span>(<span class="dt">y0_treatment =</span> <span class="dv">12</span>, <span class="dt">N0_treatment =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                      <span class="dt">y0_control =</span> <span class="ot">NULL</span>, <span class="dt">N0_control =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                      <span class="dt">discount_function =</span> <span class="st">"weibull"</span>,</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                      <span class="dt">alpha_max =</span> <span class="dv">1</span>, <span class="dt">fix_alpha =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">                      <span class="dt">weibull_scale =</span> <span class="fl">0.135</span>, <span class="dt">weibull_shape =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7"></a>
<a class="sourceLine" id="cb21-8" data-line-number="8">out &lt;-<span class="st"> </span>input <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10"></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">#&gt;  $ margin                       : num 0.02</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb21-18" data-line-number="18"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb21-20" data-line-number="20"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.952</span></a>
<a class="sourceLine" id="cb21-21" data-line-number="21"><span class="co">#&gt;  $ est_final                    : num 0.108</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb21-23" data-line-number="23"><span class="co">#&gt;  $ stop_expected_success        : num 0</span></a></code></pre></div>
<p>Instead of inputting parameters step by step, the trial parameters can be filled at once as illustrtaed below. The pipe function connects all input together and the analysis is done again.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">out &lt;-</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw">data_binomial</span>(<span class="dt">treatment =</span> binomialdata<span class="op">$</span>treatment,</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">                <span class="dt">outcome   =</span> binomialdata<span class="op">$</span>outcome,</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">                <span class="dt">complete  =</span> binomialdata<span class="op">$</span>complete) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="st">  </span><span class="kw">hypothesis</span>(<span class="dt">delta =</span> <span class="fl">0.02</span>, <span class="dt">futility_prob =</span> <span class="fl">0.05</span>, <span class="dt">prob_accept_ha =</span> <span class="fl">0.95</span>,                                       <span class="dt">expected_success_prob =</span> <span class="fl">0.90</span>, <span class="dt">alternative =</span> <span class="st">"greater"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="st">  </span><span class="kw">impute</span>(<span class="dt">no_of_impute =</span> <span class="dv">50</span>, <span class="dt">number_mcmc =</span> <span class="dv">10000</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="st">  </span><span class="kw">beta_prior</span>(<span class="dt">a0 =</span> <span class="dv">3</span>, <span class="dt">b0 =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="st">  </span><span class="kw">historical_binomial</span>(<span class="dt">y0_treatment =</span> <span class="dv">12</span>, <span class="dt">N0_treatment =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">                      <span class="dt">y0_control =</span> <span class="ot">NULL</span>, <span class="dt">N0_control =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">                      <span class="dt">discount_function =</span> <span class="st">"weibull"</span>,</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">                      <span class="dt">alpha_max =</span> <span class="dv">1</span>, <span class="dt">fix_alpha =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">                      <span class="dt">weibull_scale =</span> <span class="fl">0.135</span>, <span class="dt">weibull_shape =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"><span class="st">  </span><span class="kw">analysis</span>(<span class="dt">type =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb22-14" data-line-number="14"></a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(out)</a>
<a class="sourceLine" id="cb22-16" data-line-number="16"><span class="co">#&gt; List of 11</span></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="co">#&gt;  $ prob_of_accepting_alternative: num 0.95</span></a>
<a class="sourceLine" id="cb22-18" data-line-number="18"><span class="co">#&gt;  $ margin                       : num 0.02</span></a>
<a class="sourceLine" id="cb22-19" data-line-number="19"><span class="co">#&gt;  $ alternative                  : chr "greater"</span></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co">#&gt;  $ N_treatment                  : num 125</span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21"><span class="co">#&gt;  $ N_control                    : int 137</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="co">#&gt;  $ N_complete                   : num 262</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="co">#&gt;  $ N_enrolled                   : int 300</span></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"><span class="co">#&gt;  $ post_prob_accept_alternative : num 0.952</span></a>
<a class="sourceLine" id="cb22-25" data-line-number="25"><span class="co">#&gt;  $ est_final                    : num 0.107</span></a>
<a class="sourceLine" id="cb22-26" data-line-number="26"><span class="co">#&gt;  $ stop_futility                : num 0</span></a>
<a class="sourceLine" id="cb22-27" data-line-number="27"><span class="co">#&gt;  $ stop_expected_success        : num 0</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#estimation-of-treatment-difference">Estimation of Treatment Difference</a></li>
      <li><a href="#wrapper-function-for-design-and-analysis">Wrapper Function for Design and Analysis</a></li>
      <li>
<a href="#design-of-adaptive-trials">Design of Adaptive Trials</a><ul class="nav nav-pills nav-stacked">
<li><a href="#one-arm-trial">One-arm Trial</a></li>
      <li><a href="#two-arm-trial">Two-arm trial</a></li>
      </ul>
</li>
      <li><a href="#analysis">Analysis</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thevaa Chandereng, Donald Musgrove, Tarek Haddad, Graeme Hickey, Timothy Hanson, Theodore Lystig.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
